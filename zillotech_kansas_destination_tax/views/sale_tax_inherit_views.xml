<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="sale_tax_table_form_inherit" model="ir.ui.view">
        <field name="name">tax.table.inherited.form</field>
        <field name="model">tax.table</field>
        <field name="inherit_id" ref="zillotech_usa_sale_tax_table.sale_tax_table_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='tax_shipping']" position="after">
                <field name="destination_tax" widget="radio"/>
            </xpath>
        </field>
    </record>

    <record id="sale_tax_table_tree_inherit_kansas" model="ir.ui.view">
        <field name="name">tax.table.inherited.tree</field>
        <field name="model">tax.table</field>
        <field name="inherit_id" ref="zillotech_usa_sale_tax_table.sale_tax_table_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='tax_shipping']" position="after">
                <field name="destination_tax"/>
            </xpath>
        </field>
    </record>

    <record id="sale_order_form_inherit_kansas" model="ir.ui.view">
        <field name="name">sale.order.inherited.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_shipping_id']" position="replace">
                <field name="show_kansas_tax_button" invisible="1"/>
                <label for="partner_shipping_id" groups="account.group_delivery_invoice_address"/>
                <div groups="account.group_delivery_invoice_address" class="o_row">
                    <field name="partner_shipping_id" groups="account.group_delivery_invoice_address"
                           context="{'default_type':'delivery'}" options='{"always_reload": True, "no_create": True}'/>
                    <button name="update_destination_tax" type="object"
                            string=" Update Destination Tax"
                            help="Recompute destination tax"
                            class="btn-link mb-1 px-0" icon="fa-refresh"
                            confirm="This will update Destination Tax."
                            attrs="{'invisible': ['|', ('show_kansas_tax_button', '=', False), ('state', 'in', ['sale', 'done','cancel'])]}"/>
                </div>

            </xpath>
        </field>
    </record>

    <record id="invoice_kansas_form_inherit" model="ir.ui.view">
        <field name="name">invoice.inherited.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_shipping_id']" position="replace">
                <field name="show_kansas_tax_button_invoice" invisible="1"/>
                <label for="partner_shipping_id" groups="account.group_delivery_invoice_address"/>
                <div groups="account.group_delivery_invoice_address" class="o_row">
                    <field name="partner_shipping_id"
                           groups="account.group_delivery_invoice_address"
                           attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'out_receipt'))]}"/>
                    <button name="update_destination_tax_invoice" type="object"
                            string=" Update Destination Tax"
                            help="Recompute destination tax"
                            class="btn-link mb-1 px-0" icon="fa-refresh"
                            confirm="This will update Destination Tax."
                            attrs="{'invisible': ['|', ('show_kansas_tax_button_invoice', '=', False), ('state', 'in', ['sale', 'done','cancel'])]}"/>
                </div>

            </xpath>
        </field>
    </record>


</odoo>